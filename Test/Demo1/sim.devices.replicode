; these programs allow quick prototyping by simulating the operation of the I/O devices.


pgm_grab:(pgm |[] []
   []
      (ptn (fact (mk.goal (fact (cmd grab_right_hand ::) ::) ::) ::) |[])
      (ptn (fact (mk.val self_right_hand position p0: ::) ::) |[])
      (ptn (fact (mk.val thing: p1: ::) ::)) |[])
   |[]
   []
      (<> self_right_hand thing)
      (= p0 p1)
[]
   (inj []
      target:(mk.val self_right_hand attachment thing 1)
      [SYNC_FRONT t:(+ now 100000us) 0 1 stdin nil]
   )
   (inj []
      (fact target t 1 1)
      [SYNC_FRONT t 1 1 stdin nil]
   )
1) |[]

i_pgm_grab:(ipgm pgm_grab |[] RUN_ALWAYS 0us NOTIFY 1) [[SYNC_FRONT now 0 forever root nil 1]]


pgm_release:(pgm |[] []
   []
      (ptn (fact (mk.goal (fact (cmd release_right_hand ::) ::) ::) ::) |[])
   |[]
   |[]
[]
   (inj []
      target:(mk.val self_right_hand attachment thing 1)
      [SYNC_FRONT t:(+ now 100000us) 0 1 stdin nil]
   )
   (inj []
      (|fact target t 1 1)
      [SYNC_FRONT t 1 1 stdin nil]
   )
1) |[]

i_pgm_release:(ipgm pgm_release |[] RUN_ALWAYS 0us NOTIFY 1) [[SYNC_FRONT now 0 forever root nil 1]]


pgm_move_right_hand:(pgm |[] []
   []
      (ptn (fact (mk.goal (fact (mk.val self_right_hand position final_p: ::) ::) ::) ::) |[])
      (ptn (fact (mk.val self_right_hand position init_p: ::) ::) |[])
   |[]
   |[]
[]
   (inj []
      target:(mk.val self_right_hand position (+ init_p (/ (- final_p init_p) 100)) 1)
      [SYNC_FRONT t:(+ now 10000us) 0 1 stdin nil]
   )
   (inj []
      (fact target t 1 1)
      [SYNC_FRONT t 1 1 stdin nil]
   )
1) |[]

i_pgm_move_right_hand:(ipgm pgm_move_right_hand |[] RUN_ALWAYS 0us NOTIFY 1) [[SYNC_FRONT now 0 forever root nil 1]]


pgm_update_thing_pos:(pgm |[] []
   []
      (ptn (fact (mk.val self_right_hand position p: ::) ::) |[])
      (ptn (fact (mk.val self_right_hand attachment thing: ::) ::) |[])
   |[]
   |[]
[]
   (inj []
      target:(mk.val thing position p: 1)
      [SYNC_FRONT now 0 1 stdin nil]
   )
   (inj []
      (fact target now 1 1)
      [SYNC_FRONT now 1 1 stdin nil]
   )
1) |[]

i_pgm_update_thing_pos:(ipgm pgm_update_thing_pos |[] RUN_ALWAYS 0us NOTIFY 1) [[SYNC_FRONT now 0 forever root nil 1]]


; --------------------------------------------



; --------------------------------------------


