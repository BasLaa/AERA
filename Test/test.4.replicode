!load C:/Work/Replicode/test/user.classes.replicode

P1:(pgm
[]; tpl
   (ptn (mk.position ref_b: ref_pos: [ref_t: ::] ::) |[])
[]; input
   []; inputs
      (ptn m:(mk.position b: pos: [t: ::] ::) []
         (= b ref_b)
         (> t ref_t)
         (<> pos ref_pos)
      )
   |[]; timing
   |[]; guards
[]; prods
   (inj [(mk.last_known m |[] |[] |[] 0) [now 1 400000us nil nil]]); builds L
   (inj [(ins P1 [b pos t]) [now 1 forever stdin nil]]); instantiates P1 with b, pos ..
and t as actual template arguments
   (set [this.vw.res 0]); kills the original
1000000us; tsc
0; csm
0; sig
0; nfr
|[]; view
|[]; mks
|[]; vws
0; psln_thr
)

|[]

P2:(pgm
[(ptn ref_b: |[])]; tpl
[]; input
   []; inputs
      (ptn m:(mk.position b: pos: [t: ::] ::) [(<> b ref_b)])
   |[]; timings
   |[]; guards
[]; productions
   (inj [(ins P1 [m]) [now 1 100000us stdin nil]])
   (inj [(ins P2 [b]) [now 1 200000us stdin nil]])
1000000us; tsc
0; csm
0; sig
0; nfr
|[]; view
|[]; mks
|[]; vws
0; psln_thr
)

|[]

iP2:(ipgm
P2; code
[]; args
   [nil 1]
|[]; view
|[]; mks
|[]; vws
0; psln_thr
)

[]
   [now 1 300000us stdin nil 1]

P3:(pgm
|[]
[]
   []
      (ptn l:(mk.last_known ::) |[])
   |[]
   |[]
[]
   (eje [l l.vw 0])
100000us
0
0
0
|[]
|[]
|[]
0
)

|[]

iP3:(ipgm
P3
|[]
|[]
|[]
|[]
0
)

[]
   [now 1 forever stdin nil 1]

P4:(pgm
|[]
[]
   []
      (ptn m:(mk.position b: (vec3 x: y: z:) [T: s: r: g: o:] ::) |[])
   |[]
   |[]
[]
   (inj [(mk.position b (vec3 (+ x 1) y z) |[] |[] |[] 0) [(+ T 1000000us) s r g o] 0])
100000us
0
0
0
|[]
|[]
|[]
0
)

|[]

iP4:(ipgm
P4
|[]
|[]
|[]
|[]
0
)

[]
   [now 1 forever stdin nil 1]

O1:(mk.position
self
(vec3 3 3 3)
|[9
|[]
|[]
0
)

[]
   [now 1 50000us stdin nil]
